{% extends "base.html" %}
{% block title %}Employer Dashboard | JobBoard{% endblock %}

{% block content %}
<!-- Main Content -->
<div class="employer-dashboard-main p-4 p-md-5">
  <div class="d-lg-flex justify-content-lg-between align-items-lg-center mb-5">
    <div>
      <h2 class="fw-bold">Welcome back, {{ user.get_full_name | default:user.username }}</h2>
      <p class="text-muted">Here's what's happening with your hiring today</p>
    </div>
    <a href="{% url 'create-job' %}" class="btn btn-primary btn-lg px-4 shadow-sm">
      <i class="bi bi-plus-circle me-2"></i>Post New Job
    </a>
  </div>

  <!-- Key Metrics -->
  <div class="row g-4 mb-5">
    <div class="col-6 col-lg-3">
      <div class="metric-card text-center">
        <h3 class="fw-bold text-primary mb-1">{{ user.jobs.count }}</h3>
        <p class="text-muted mb-0">Active Jobs</p>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="metric-card text-center">
        <h3 class="fw-bold text-success mb-1">{{ total_applications }}</h3>
        <p class="text-muted mb-0">Total Applications</p>
      </div>
    </div>
  </div>

  <!-- Jobs posted -->
   {% if jobs %}
   {% for job in jobs %}
   <div class="bg-white rounded-3 shadow-sm p-4 mt-4">
    <h5 class="fw-bold mb-4">{{ job.title }}</h5>
    <div class="mb-3">
        <strong>{{ job.company_name }}</strong> â€¢ {{ job.location }}<br>
        <small class="text-muted">{{ job.date_posted|date:"M d, Y" }}</small><br>
        <a href="{% url 'view-applications' job.id %}" class="btn btn-sm btn-outline-primary mt-2">
            View Applications ({{ job.applications.count }})
        </a>
    </div>
    <div>
        <a href="{% url 'update-job' job.id %}" class="btn btn-warning btn-sm me-2">Edit</a>
        <a href="{% url 'delete-job' job.id %}" class="btn btn-danger btn-sm">Delete</a>
    </div>
    </div>
    {% endfor %}
    {% else %}
    <h3 class="text-center mt-3">You haven't posted any jobs yet</h3>
    {% endif %}
</div>
{% endblock %}
