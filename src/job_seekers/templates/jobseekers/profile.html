{% extends "base.html" %}
{% block title %}My Profile | JobBoard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center" style="margin-top: 100px;">
  <h2>My Profile</h2>
  <a href="{% url 'preview-profile' %}" class="btn btn-outline-secondary mt-2 mb-3">
    Preview My Profile
  </a>
</div>

<!-- General Information Update Form -->
<div class="d-flex align-items-center justify-content-center my-5">
  <div class="form-card">
    <h4>General Information</h4>
    {% load crispy_forms_tags %}
    <form class="mt-4" method="post">
      {% csrf_token %}

      {{ form|crispy }}
      <button type="submit" class="w-100 btn btn-dark mt-3 fw-bold mb-3">Update Profile</button>
    </form>
  </div>
</div>

<!-- Education Section -->
<div class="card mb-4">
  <div class="card-body">
    <h4 class="mb-3">Education</h4>
    <a href="{% url 'add-education' %}" class="btn btn-sm btn-success mb-3">+ Add Education</a>

    {% if educations %}
      <ul class="list-group">
        {% for edu in educations %}
        <li class="list-group-item mb-3 d-lg-flex justify-content-lg-between p-4">
          <div> 
            <p><strong>{{ edu.degree }}</strong> - {{ edu.major | default:'' }}</p>
            <p class="text-primary">{{ edu.institution }}</p>
            <p>Passing Year: {{ edu.passing_year }} | Result: {{ edu.result | default:'' }}</p>
          </div>
          <div>
            <a href="{% url 'edit-education' edu.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
            <a href="{% url 'delete-education' edu.id %}" class="btn btn-sm btn-outline-danger ms-2">Delete</a>
          </div>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <h5 class="text-center mt-3">No education added yet.</h5>
    {% endif %}
  </div>
</div>

<!-- Work Experience Section -->
<div class="card mb-4">
  <div class="card-body">
    <h4 class="mb-3">Work Experience</h4>
    <a href="{% url 'add-experience' %}" class="btn btn-sm btn-success mb-3">+ Add Experience</a>

    {% if experiences %}
      <ul class="list-group">
        {% for exp in experiences %}
        <li class="list-group-item mb-3 d-lg-flex justify-content-lg-between p-4">
          <div>
            <p><strong>{{ exp.position }}</strong> at {{ exp.institution }}</p>
            <p>{{ exp.start_date }} - {% if exp.is_currently_there %}Present{% else %}{{ exp.end_date }}{% endif %}</p>
            <p>{{ exp.responsibilities }}</p>
          </div>
          <div>
            <a href="{% url 'edit-experience' exp.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
            <a href="{% url 'delete-experience' exp.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
          </div>
        </li>
        {% endfor %}
      </ul>
    {% else %}
      <h5 class="text-center mt-3">No work experience added yet.</h5>
    {% endif %}
  </div>
</div>

{% endblock %}
